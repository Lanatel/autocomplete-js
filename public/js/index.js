!function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return r(t[s][1][e]||e)}),u,u.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){e("./location_autocomplete")},{"./location_autocomplete":3}],2:[function(e,t,n){let o;(()=>{let e=new XMLHttpRequest;return new Promise((t,n)=>{e.onreadystatechange=function(){4===this.readyState&&200===this.status&&t(this.responseText)},e.open("GET","cities.json",!0),e.send()})})().then(e=>(e=>{let t=JSON.parse(e),n={};for(const e in t)for(const o in t[e])n.hasOwnProperty(o)||(n[o]=[]),t[e][o].forEach(t=>n[o].push(t+(t!==e?", "+e:"")));let o=[];return Object.keys(n).sort().reverse().forEach(e=>o=o.concat(n[e])),o})(e)).then(e=>o=e);const r={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","{":"Х","]":"ъ","}":"Ъ","|":"/","`":"ё","~":"Ё",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж",":":"Ж","'":"э",'"':"Э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б","<":"Б",".":"ю",">":"Ю","/":".","?":",","@":'"',"#":"№",$:";","^":":","&":"?"},i={"ё":"е","ъ":"ь","-":" ","—":""},s=e=>e.trim().toLowerCase().replace(/ +/g," ").replace(/./g,e=>r[e]||i[e]||e);t.exports={getCities:e=>{let t=[],n=0;e=s(e);do{s(o[n]).startsWith(e)&&t.push(o[n]),n++}while(t.length<5&&o.length>n);return t},convert:s}},{}],3:[function(e,t,n){let o=document.getElementsByClassName("location-autocomplete");Array.from(o).forEach(t=>(function(t){let n,o,r;t.addEventListener("focus",(function(t){this.value="",o||(o=e("./cities"))})),t.addEventListener("input",(function(e){let i,s=o.convert(this.value);if(l(),!s)return!1;n=-1,r=0,(i=document.createElement("DIV")).setAttribute("class","autocomplete-items"),this.parentNode.appendChild(i),o.getCities(s).forEach(e=>{let n=document.createElement("DIV");n.setAttribute("data-value",e),n.innerHTML=`<strong>${e.substr(0,s.length)}</strong>${e.substr(s.length)}`,n.addEventListener("click",(function(e){t.value=this.getAttribute("data-value")})),i.appendChild(n)}),c(i)})),t.addEventListener("keydown",(function(e){let t=this.parentNode.getElementsByClassName("autocomplete-items");if(t.length>0){let o=t[0].getElementsByTagName("div");switch(e.code){case"ArrowDown":s(o);break;case"ArrowUp":i(o);break;case"Enter":e.preventDefault(),n>=0&&o&&o[n].click()}}})),document.addEventListener("click",(function(e){l(e.target)}));const i=e=>{if(0===e.length)return!1;n>0&&(a(e),n>1&&(n!==e.length-1&&(r-=e[n].clientHeight),e[0].parentNode.scrollTop=r),e[--n].classList.add("autocomplete-active"))},s=e=>{if(0===e.length)return!1;n<e.length-1&&(a(e),e[++n].classList.add("autocomplete-active"),n>1&&(n!==e.length-1&&(r+=e[n].clientHeight),e[0].parentNode.scrollTop=r))},a=e=>Array.from(e).forEach(e=>e.classList.remove("autocomplete-active")),l=e=>{let t=document.getElementsByClassName("autocomplete-items");Array.from(t).forEach(t=>{e!==t&&t.parentNode.removeChild(t)})},c=e=>{let t,n=window.innerHeight-e.getBoundingClientRect().top,o=e.getBoundingClientRect().top,r=e.offsetHeight;n>r||n>o?t=n:(e.classList.add("autocomplete-top"),t=o);let i=e.childNodes;if((t-=15)<r&&i.length>3){let n=i[0].offsetHeight;e.style.height=n*Math.max(3,Math.floor(t/n))+"px",e.style.overflowY="scroll"}}})(t))},{"./cities":2}]},{},[1]);
